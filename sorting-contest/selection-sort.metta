; Helper: Get score from element ($score $data)
(= (get-score $e) (car-atom $e))

; Helper: Get data from element ($score $data)
(= (get-data $e) (car-atom (cdr-atom $e)))

; Helper: Find the element with the maximum score in the list
(= (find-max $list)
   (if (== (cdr-atom $list) ())
       (car-atom $list)
       (let* (
           ($head (car-atom $list))
           ($max-rest (find-max (cdr-atom $list)))
       )
       (if (>= (get-score $head) (get-score $max-rest))
           $head
           $max-rest))))

; Helper: Remove the first occurrence of an element
(= (remove-first $elem $list)
   (if (== $list ())
       ()
       (let* (
           ($head (car-atom $list))
           ($tail (cdr-atom $list))
       )
       (if (== $elem $head)
           $tail
           (cons-atom $head (remove-first $elem $tail))))))

; Selection Sort Logic (Partial: Selects top K elements)
(= (selection-sort-k $k $list)
   (if (or (<= $k 0) (== $list ()))
       ()
       (let* (
           ($max (find-max $list))
           ($rest (remove-first $max $list))
       )
       (cons-atom $max (selection-sort-k (- $k 1) $rest)))))

; Helper: Extract user data from the sorted list
(= (extract-data $list)
   (if (== $list ())
       ()
       (cons-atom (get-data (car-atom $list)) (extract-data (cdr-atom $list)))))

; Main Function
(= (get-top-k $k $list)
   (extract-data (selection-sort-k $k $list)))

; === Example Usage ===

!(get-top-k 20 ((9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia))
 (9 (Name Alice))
 (7 (Name Bob))
 (5 (Name Charlie))
 (8 (Name Diana))
 (3 (Name Ethan))
 (6 (Name Fiona))
 (2 (Name George))
 (4 (Name Hannah))
 (1 (Name Ian))
 (10 (Name Julia)))
)